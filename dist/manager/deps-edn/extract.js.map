{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../lib/manager/deps-edn/extract.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,4EAA8D;AAE9D,kDAAqD;AAErD,SAAgB,kBAAkB,CAAC,OAAe;IAChD,MAAM,IAAI,GAAwB,EAAE,CAAC;IAErC,MAAM,KAAK,GAAG,4DAA4D,CAAC;IAC3E,IAAI,IAAI,GAAG,OAAO,CAAC;IACnB,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7B,IAAI,MAAM,GAAG,CAAC,CAAC;IACf,OAAO,KAAK,EAAE;QACZ,MAAM,CAAC,WAAW,EAAE,OAAO,EAAE,YAAY,CAAC,GAAG,KAAK,CAAC;QACnD,MAAM,IAAI,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC;QAC3C,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAC7B,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzB,IAAI,CAAC,IAAI,CAAC;YACR,UAAU,EAAE,iBAAiB,CAAC,EAAE;YAChC,OAAO,EAAE,uBAAa,CAAC,OAAO,CAAC;YAC/B,YAAY;YACZ,YAAY,EAAE,EAAE;SACjB,CAAC,CAAC;KACJ;IAED,OAAO,EAAE,IAAI,EAAE,CAAC;AAClB,CAAC;AAtBD,gDAsBC","sourcesContent":["import * as datasourceClojure from '../../datasource/clojure';\nimport { PackageDependency, PackageFile } from '../common';\nimport { expandDepName } from '../leiningen/extract';\n\nexport function extractPackageFile(content: string): PackageFile {\n  const deps: PackageDependency[] = [];\n\n  const regex = /([^{\\s,]*)[\\s,]*{[\\s,]*:mvn\\/version[\\s,]+\"([^\"]+)\"[\\s,]*}/;\n  let rest = content;\n  let match = regex.exec(rest);\n  let offset = 0;\n  while (match) {\n    const [wholeSubstr, depName, currentValue] = match;\n    offset += match.index + wholeSubstr.length;\n    rest = content.slice(offset);\n    match = regex.exec(rest);\n\n    deps.push({\n      datasource: datasourceClojure.id,\n      depName: expandDepName(depName),\n      currentValue,\n      registryUrls: [],\n    });\n  }\n\n  return { deps };\n}\n"]}