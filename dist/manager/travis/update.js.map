{"version":3,"file":"update.js","sourceRoot":"","sources":["../../../lib/manager/travis/update.ts"],"names":[],"mappings":";;;;;;AAAA,0DAAkC;AAClC,kEAAyC;AACzC,yCAAsC;AAGtC,SAAgB,gBAAgB,CAAC,EAC/B,WAAW,EACX,OAAO,GACgB;IACvB,IAAI;QACF,eAAM,CAAC,KAAK,CAAC,8BAA8B,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC/D,MAAM,MAAM,GAAG,uBAAY,CAAC,WAAW,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC;QACxD,IAAI,KAAa,CAAC;QAClB,IAAI,YAAE,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE;YACtC,KAAK;gBACH,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM;oBAC3D,CAAC,CAAC,GAAG;oBACL,CAAC,CAAC,GAAG,CAAC;SACX;aAAM;YACL,KAAK,GAAG,EAAE,CAAC;SACZ;QACD,IAAI,SAAS,GAAG,YAAY,CAAC;QAC7B,gCAAgC;QAChC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC9C,SAAS,IAAI,GAAG,MAAM,KAAK,KAAK,GAAG,OAAO,GAAG,KAAK,IAAI,CAAC;QACzD,CAAC,CAAC,CAAC;QACH,OAAO,WAAW,CAAC,OAAO,CAAC,2BAA2B,EAAE,SAAS,CAAC,CAAC;KACpE;IAAC,OAAO,GAAG,EAAE;QACZ,eAAM,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,EAAE,6CAA6C,CAAC,CAAC;QACrE,OAAO,IAAI,CAAC;KACb;AACH,CAAC;AA1BD,4CA0BC","sourcesContent":["import is from '@sindresorhus/is';\nimport detectIndent from 'detect-indent';\nimport { logger } from '../../logger';\nimport { UpdateDependencyConfig } from '../common';\n\nexport function updateDependency({\n  fileContent,\n  upgrade,\n}: UpdateDependencyConfig): string | null {\n  try {\n    logger.debug(`travis.updateDependency(): ${upgrade.newValue}`);\n    const indent = detectIndent(fileContent).indent || '  ';\n    let quote: string;\n    if (is.string(upgrade.currentValue[0])) {\n      quote =\n        fileContent.split(`'`).length > fileContent.split(`\"`).length\n          ? `'`\n          : `\"`;\n    } else {\n      quote = '';\n    }\n    let newString = `node_js:\\n`;\n    // TODO: `newValue` is a string!\n    upgrade.newValue.split(',').forEach((version) => {\n      newString += `${indent}- ${quote}${version}${quote}\\n`;\n    });\n    return fileContent.replace(/node_js:(\\n\\s+-[^\\n]+)+\\n/, newString);\n  } catch (err) {\n    logger.debug({ err }, 'Error setting new .travis.yml node versions');\n    return null;\n  }\n}\n"]}