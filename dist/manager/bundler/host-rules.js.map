{"version":3,"file":"host-rules.js","sourceRoot":"","sources":["../../../lib/manager/bundler/host-rules.ts"],"names":[],"mappings":";;;;;;AAAA,8CAAsB;AAEtB,sDAAgD;AAEhD,SAAS,iBAAiB,CAAC,IAAc;IACvC,OAAO,CACL,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;QACxD,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CACvD,CAAC;AACJ,CAAC;AAED,SAAgB,sBAAsB,CAAC,EACrC,QAAQ,GAGT;IACC,OAAO,oBAAO,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;AACzD,CAAC;AAND,wDAMC;AAED,SAAgB,SAAS,CAAC,QAAkB;IAC1C,IAAI,QAAQ,CAAC,QAAQ,EAAE;QACrB,OAAO,QAAQ,CAAC,QAAQ,CAAC;KAC1B;IACD,IAAI,QAAQ,CAAC,UAAU,EAAE;QACvB,OAAO,QAAQ,CAAC,UAAU,CAAC;KAC5B;IACD,IAAI,QAAQ,CAAC,OAAO,EAAE;QACpB,OAAO,aAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;KACzC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAZD,8BAYC;AAED,SAAgB,4BAA4B,CAAC,QAAkB;IAC7D,IAAI,QAAQ,CAAC,QAAQ,EAAE;QACrB,OAAO,GAAG,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,EAAE,CAAC;KACpD;IAED,OAAO,QAAQ,CAAC,KAAK,CAAC;AACxB,CAAC;AAND,oEAMC","sourcesContent":["import URL from 'url';\nimport { HostRule } from '../../types';\nimport { findAll } from '../../util/host-rules';\n\nfunction isAuthenticatable(rule: HostRule): boolean {\n  return (\n    (!!rule.hostName || !!rule.domainName || !!rule.baseUrl) &&\n    ((!!rule.username && !!rule.password) || !!rule.token)\n  );\n}\n\nexport function findAllAuthenticatable({\n  hostType,\n}: {\n  hostType: string;\n}): HostRule[] {\n  return findAll({ hostType }).filter(isAuthenticatable);\n}\n\nexport function getDomain(hostRule: HostRule): string {\n  if (hostRule.hostName) {\n    return hostRule.hostName;\n  }\n  if (hostRule.domainName) {\n    return hostRule.domainName;\n  }\n  if (hostRule.baseUrl) {\n    return URL.parse(hostRule.baseUrl).host;\n  }\n\n  return null;\n}\n\nexport function getAuthenticationHeaderValue(hostRule: HostRule): string {\n  if (hostRule.username) {\n    return `${hostRule.username}:${hostRule.password}`;\n  }\n\n  return hostRule.token;\n}\n"]}