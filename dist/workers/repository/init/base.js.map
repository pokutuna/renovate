{"version":3,"file":"base.js","sourceRoot":"","sources":["../../../../lib/workers/repository/init/base.ts"],"names":[],"mappings":";;;AACA,4CAAyC;AACzC,gDAA6C;AAC7C,2CAAiD;AAE1C,KAAK,UAAU,eAAe,CACnC,MAAsB;IAEtB,eAAM,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;IAClC,eAAM,CAAC,KAAK,CAAC,0BAA0B,MAAM,CAAC,eAAe,EAAE,CAAC,CAAC;IACjE,IAAI,KAAK,GAAwB,EAAE,CAAC;IACpC,IAAI,aAAqB,CAAC;IAC1B,mCAAmC;IACnC,IAAI,MAAM,kBAAY,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;QACzC,aAAa,GAAG,MAAM,mBAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;KACjE;SAAM;QACL,+CAA+C;QAC/C,MAAM,OAAO,GAAG,8BAA8B,MAAM,CAAC,UAAU,4BAA4B,CAAC;QAC5F,KAAK,GAAG;YACN;gBACE,OAAO,EAAE,YAAY;gBACrB,OAAO;aACR;SACF,CAAC;QACF,eAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KACtB;IACD,OAAO,EAAE,GAAG,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,aAAa,EAAE,CAAC;AAC3E,CAAC;AAtBD,0CAsBC","sourcesContent":["import { RenovateConfig, ValidationMessage } from '../../../config';\nimport { logger } from '../../../logger';\nimport { platform } from '../../../platform';\nimport { branchExists } from '../../../util/git';\n\nexport async function checkBaseBranch(\n  config: RenovateConfig\n): Promise<RenovateConfig> {\n  logger.debug('checkBaseBranch()');\n  logger.debug(`config.repoIsOnboarded=${config.repoIsOnboarded}`);\n  let error: ValidationMessage[] = [];\n  let baseBranchSha: string;\n  // Read content and target PRs here\n  if (await branchExists(config.baseBranch)) {\n    baseBranchSha = await platform.setBaseBranch(config.baseBranch);\n  } else {\n    // Warn and ignore setting (use default branch)\n    const message = `The configured baseBranch \"${config.baseBranch}\" is not present. Ignoring`;\n    error = [\n      {\n        depName: 'baseBranch',\n        message,\n      },\n    ];\n    logger.warn(message);\n  }\n  return { ...config, errors: config.errors.concat(error), baseBranchSha };\n}\n"]}