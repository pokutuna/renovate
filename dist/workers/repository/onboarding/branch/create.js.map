{"version":3,"file":"create.js","sourceRoot":"","sources":["../../../../../lib/workers/repository/onboarding/branch/create.ts"],"names":[],"mappings":";;;AACA,gEAAiE;AACjE,+CAA4C;AAC5C,8CAAmD;AACnD,qCAA+C;AAE/C,MAAM,iBAAiB,GAAG,6BAAe,CAAC,CAAC,CAAC,CAAC;AAE7C,SAAgB,sBAAsB,CACpC,MAA+B;IAE/B,eAAM,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;IACzC,MAAM,QAAQ,GAAG,4BAAmB,CAAC,MAAM,CAAC,CAAC;IAC7C,eAAM,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAC3C,IAAI,aAAa,CAAC;IAClB,qBAAqB;IACrB,IAAI,MAAM,CAAC,eAAe,EAAE;QAC1B,aAAa,GAAG,MAAM,CAAC,kBAAkB,CAAC;QAC1C,IAAI,MAAM,CAAC,mBAAmB,EAAE;YAC9B,aAAa,IAAI,IAAI,MAAM,CAAC,mBAAmB,GAAG,CAAC;SACpD;QACD,aAAa,IAAI,IAAI,CAAC;QACtB,aAAa,IAAI,MAAM,GAAG,iBAAiB,CAAC;KAC7C;SAAM;QACL,aAAa,GAAG,MAAM,GAAG,iBAAiB,CAAC;KAC5C;IACD,qBAAqB;IACrB,IAAI,MAAM,CAAC,MAAM,EAAE;QACjB,eAAM,CAAC,IAAI,CAAC,kDAAkD,CAAC,CAAC;QAChE,OAAO,IAAI,CAAC;KACb;IACD,OAAO,iBAAW,CAAC;QACjB,UAAU,EAAE,MAAM,CAAC,gBAAgB;QACnC,KAAK,EAAE;YACL;gBACE,IAAI,EAAE,iBAAiB;gBACvB,QAAQ;aACT;SACF;QACD,OAAO,EAAE,aAAa;KACvB,CAAC,CAAC;AACL,CAAC;AAjCD,wDAiCC","sourcesContent":["import { RenovateConfig } from '../../../../config';\nimport { configFileNames } from '../../../../config/app-strings';\nimport { logger } from '../../../../logger';\nimport { commitFiles } from '../../../../util/git';\nimport { getOnboardingConfig } from './config';\n\nconst defaultConfigFile = configFileNames[0];\n\nexport function createOnboardingBranch(\n  config: Partial<RenovateConfig>\n): Promise<string | null> {\n  logger.debug('createOnboardingBranch()');\n  const contents = getOnboardingConfig(config);\n  logger.debug('Creating onboarding branch');\n  let commitMessage;\n  // istanbul ignore if\n  if (config.semanticCommits) {\n    commitMessage = config.semanticCommitType;\n    if (config.semanticCommitScope) {\n      commitMessage += `(${config.semanticCommitScope})`;\n    }\n    commitMessage += ': ';\n    commitMessage += 'add ' + defaultConfigFile;\n  } else {\n    commitMessage = 'Add ' + defaultConfigFile;\n  }\n  // istanbul ignore if\n  if (config.dryRun) {\n    logger.info('DRY-RUN: Would commit files to onboarding branch');\n    return null;\n  }\n  return commitFiles({\n    branchName: config.onboardingBranch,\n    files: [\n      {\n        name: defaultConfigFile,\n        contents,\n      },\n    ],\n    message: commitMessage,\n  });\n}\n"]}