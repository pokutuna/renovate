{"version":3,"file":"common.js","sourceRoot":"","sources":["../../../lib/util/exec/common.ts"],"names":[],"mappings":";;;AAAA,iDAGuB;AACvB,+BAAiC;AAIjC,IAAY,YAIX;AAJD,WAAY,YAAY;IACtB,6BAAa,CAAA;IACb,iCAAiB,CAAA;IACjB,iCAAiB,CAAA;AACnB,CAAC,EAJW,YAAY,GAAZ,oBAAY,KAAZ,oBAAY,QAIvB;AAoCY,QAAA,OAAO,GAGO,gBAAS,CAAC,oBAAM,CAAC,CAAC","sourcesContent":["import {\n  ExecOptions as ChildProcessExecOptions,\n  exec as cpExec,\n} from 'child_process';\nimport { promisify } from 'util';\n\nexport type Opt<T> = T | null | undefined;\n\nexport enum BinarySource {\n  Auto = 'auto',\n  Docker = 'docker',\n  Global = 'global',\n}\n\nexport interface ExecConfig {\n  binarySource: Opt<BinarySource>;\n  dockerUser: Opt<string>;\n  localDir: Opt<string>;\n  cacheDir: Opt<string>;\n}\n\nexport type VolumesPair = [string, string];\nexport type VolumeOption = Opt<string | VolumesPair>;\n\nexport type DockerExtraCommand = Opt<string>;\nexport type DockerExtraCommands = Opt<DockerExtraCommand[]>;\n\nexport interface DockerOptions {\n  image: string;\n  tag?: Opt<string>;\n  tagScheme?: Opt<string>;\n  tagConstraint?: Opt<string>;\n  volumes?: Opt<VolumeOption[]>;\n  envVars?: Opt<Opt<string>[]>;\n  cwd?: Opt<string>;\n  preCommands?: DockerExtraCommands;\n  postCommands?: DockerExtraCommands;\n}\n\nexport interface RawExecOptions extends ChildProcessExecOptions {\n  encoding: string;\n}\n\nexport interface ExecResult {\n  stdout: string;\n  stderr: string;\n}\n\nexport const rawExec: (\n  cmd: string,\n  opts: RawExecOptions\n) => Promise<ExecResult> = promisify(cpExec);\n"]}