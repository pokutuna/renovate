{"version":3,"file":"managers.js","sourceRoot":"","sources":["../../../lib/config/validation-helpers/managers.ts"],"names":[],"mappings":";;;AAAA,2CAA+C;AAQ/C;;GAEG;AACH,SAAgB,KAAK,CAAC,EACpB,YAAY,EACZ,WAAW,GACM;IACjB,IAAI,kBAA0B,CAAC;IAC/B,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;QACxC,IACE,YAAY,CAAC,QAAQ,CAAC,IAAI,CACxB,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,wBAAc,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CACzD,EACD;YACA,kBAAkB,GAAG,GAAG,WAAW;iFAE/B,YAAY,CAAC,QACf;mCAC2B,wBAAc,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;SAC9D;KACF;SAAM,IAAI,OAAO,YAAY,CAAC,QAAQ,KAAK,WAAW,EAAE;QACvD,kBAAkB,GAAG,GAAG,WAAW,wDAAwD,OAAO,YAAY,CAAC,QAAQ,GAAG,CAAC;KAC5H;IAED,OAAO,kBAAkB;QACvB,CAAC,CAAC;YACE;gBACE,OAAO,EAAE,qBAAqB;gBAC9B,OAAO,EAAE,kBAAkB;aAC5B;SACF;QACH,CAAC,CAAC,EAAE,CAAC;AACT,CAAC;AA7BD,sBA6BC","sourcesContent":["import { getManagerList } from '../../manager';\nimport { PackageRule, ValidationMessage } from '../common';\n\nexport interface CheckManagerArgs {\n  resolvedRule: PackageRule;\n  currentPath: string;\n}\n\n/**\n * Only if type condition or context condition violated then errors array will be mutated to store metadata\n */\nexport function check({\n  resolvedRule,\n  currentPath,\n}: CheckManagerArgs): ValidationMessage[] {\n  let managersErrMessage: string;\n  if (Array.isArray(resolvedRule.managers)) {\n    if (\n      resolvedRule.managers.find(\n        (confManager) => !getManagerList().includes(confManager)\n      )\n    ) {\n      managersErrMessage = `${currentPath}:\n        You have included an unsupported manager in a package rule. Your list: ${\n          resolvedRule.managers\n        }.\n        Supported managers are: (${getManagerList().join(', ')}).`;\n    }\n  } else if (typeof resolvedRule.managers !== 'undefined') {\n    managersErrMessage = `${currentPath}: Managers should be type of List. You have included ${typeof resolvedRule.managers}.`;\n  }\n\n  return managersErrMessage\n    ? [\n        {\n          depName: 'Configuration Error',\n          message: managersErrMessage,\n        },\n      ]\n    : [];\n}\n"]}