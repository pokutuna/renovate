{"version":3,"file":"file.js","sourceRoot":"","sources":["../../lib/config/file.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAwB;AACxB,sCAAmC;AAEnC,2CAA4C;AAE5C,SAAgB,SAAS,CAAC,GAAsB;IAC9C,IAAI,UAAU,GAAG,GAAG,CAAC,oBAAoB,IAAI,QAAQ,CAAC;IACtD,IAAI,CAAC,cAAI,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;QAChC,UAAU,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,IAAI,UAAU,EAAE,CAAC;QAC9C,eAAM,CAAC,KAAK,CAAC,8BAA8B,GAAG,UAAU,CAAC,CAAC;KAC3D;IACD,IAAI,MAAM,GAAmB,EAAE,CAAC;IAChC,IAAI;QACF,oEAAoE;QACpE,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;KAC9B;IAAC,OAAO,GAAG,EAAE;QACZ,qBAAqB;QACrB,IAAI,GAAG,YAAY,WAAW,EAAE;YAC9B,eAAM,CAAC,KAAK,CAAC,kCAAkC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;YAC5D,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACjB;QACD,aAAa;QACb,eAAM,CAAC,KAAK,CAAC,yCAAyC,CAAC,CAAC;KACzD;IACD,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,GAAG,yBAAa,CAAC,MAAM,CAAC,CAAC;IAC7D,IAAI,UAAU,EAAE;QACd,eAAM,CAAC,IAAI,CACT,EAAE,cAAc,EAAE,MAAM,EAAE,cAAc,EAAE,EAC1C,wBAAwB,CACzB,CAAC;QACF,MAAM,GAAG,cAAc,CAAC;KACzB;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AA5BD,8BA4BC","sourcesContent":["import path from 'path';\nimport { logger } from '../logger';\nimport { RenovateConfig } from './common';\nimport { migrateConfig } from './migration';\n\nexport function getConfig(env: NodeJS.ProcessEnv): RenovateConfig {\n  let configFile = env.RENOVATE_CONFIG_FILE || 'config';\n  if (!path.isAbsolute(configFile)) {\n    configFile = `${process.cwd()}/${configFile}`;\n    logger.debug('Checking for config file in ' + configFile);\n  }\n  let config: RenovateConfig = {};\n  try {\n    // eslint-disable-next-line global-require,import/no-dynamic-require\n    config = require(configFile);\n  } catch (err) {\n    // istanbul ignore if\n    if (err instanceof SyntaxError) {\n      logger.fatal(`Could not parse config file \\n ${err.stack}`);\n      process.exit(1);\n    }\n    // Do nothing\n    logger.debug('No config file found on disk - skipping');\n  }\n  const { isMigrated, migratedConfig } = migrateConfig(config);\n  if (isMigrated) {\n    logger.warn(\n      { originalConfig: config, migratedConfig },\n      'Config needs migrating'\n    );\n    config = migratedConfig;\n  }\n  return config;\n}\n"]}